"use strict";(self["webpackChunkwap"]=self["webpackChunkwap"]||[]).push([[8858],{8858:function(e,i,a){a.r(i),a.d(i,{default:function(){return m}});var t=function(){var e=this,i=e._self._c;return i("div",{staticClass:"main-page"},[i("div",{staticClass:"headerTag"},[e._v("车辆检查")]),i("form",{staticClass:"h-form"},[i("item",{attrs:{must:"",name:"标题"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.info.FName,expression:"info.FName"}],domProps:{value:e.info.FName},on:{input:function(i){i.target.composing||e.$set(e.info,"FName",i.target.value)}}})]),i("item",{attrs:{must:"",name:"检查人"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.info.PersonName,expression:"info.PersonName"}],attrs:{readonly:""},domProps:{value:e.info.PersonName},on:{click:e.choosePerson,input:function(i){i.target.composing||e.$set(e.info,"PersonName",i.target.value)}}})]),i("item",{attrs:{must:"",name:"检查日期"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.info.FDate,expression:"info.FDate"}],attrs:{readonly:""},domProps:{value:e.info.FDate},on:{click:function(i){return e.chooseTime("FDate")},input:function(i){i.target.composing||e.$set(e.info,"FDate",i.target.value)}}})]),i("item",{attrs:{name:"检查情况汇总"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.info.Content,expression:"info.Content"}],domProps:{value:e.info.Content},on:{input:function(i){i.target.composing||e.$set(e.info,"Content",i.target.value)}}})]),i("div",{staticClass:"headerTag"},[e._v("车辆信息")]),e._l(e.info.EntryList,(function(a,t){return i("div",{key:t,staticClass:"car-item shadow"},[i("div",{staticClass:"car-item-line",style:{color:e.$config.theme,fontWeight:800}},[e._v("车牌号："+e._s(a.FCarNo))]),i("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[i("div",{staticClass:"car-item-line"},[e._v("车辆外观："),i("van-tag",{attrs:{type:a.FAppearance?"primary":"warning"}},[1==a.FAppearance?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FAppearance=0}}}):e._e(),0==a.FAppearance?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FAppearance=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("驾驶舱："),i("van-tag",{attrs:{type:a.FCockpit?"primary":"warning"}},[1==a.FCockpit?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FCockpit=0}}}):e._e(),0==a.FCockpit?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FCockpit=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("引擎盖内："),i("van-tag",{attrs:{type:a.FEngineHood?"primary":"warning"}},[1==a.FEngineHood?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FEngineHood=0}}}):e._e(),0==a.FEngineHood?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FEngineHood=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("三检表："),i("van-tag",{attrs:{type:a.FMeter?"primary":"warning"}},[1==a.FMeter?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FMeter=0}}}):e._e(),0==a.FMeter?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FMeter=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("灭火器检查表："),i("van-tag",{attrs:{type:a.FExtinguisher?"primary":"warning"}},[1==a.FExtinguisher?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FExtinguisher=0}}}):e._e(),0==a.FExtinguisher?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FExtinguisher=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("车辆系统："),i("van-tag",{attrs:{type:a.FVehicleSystem?"primary":"warning"}},[1==a.FVehicleSystem?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FVehicleSystem=0}}}):e._e(),0==a.FVehicleSystem?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FVehicleSystem=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("车辆轮胎："),i("van-tag",{attrs:{type:a.FTyre?"primary":"warning"}},[1==a.FTyre?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FTyre=0}}}):e._e(),0==a.FTyre?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FTyre=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("车辆牌照及附件："),i("van-tag",{attrs:{type:a.FLicenseTag?"primary":"warning"}},[1==a.FLicenseTag?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FLicenseTag=0}}}):e._e(),0==a.FLicenseTag?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FLicenseTag=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("车辆运行："),i("van-tag",{attrs:{type:a.FRunningStatus?"primary":"warning"}},[1==a.FRunningStatus?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FRunningStatus=0}}}):e._e(),0==a.FRunningStatus?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FRunningStatus=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("驾驶舱摄像头1："),i("van-tag",{attrs:{type:a.FCamera1?"primary":"warning"}},[1==a.FCamera1?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FCamera1=0}}}):e._e(),0==a.FCamera1?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FCamera1=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("驾驶舱摄像头2："),i("van-tag",{attrs:{type:a.FCamera2?"primary":"warning"}},[1==a.FCamera2?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FCamera2=0}}}):e._e(),0==a.FCamera2?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FCamera2=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("车厢内摄像头："),i("van-tag",{attrs:{type:a.FCamera3?"primary":"warning"}},[1==a.FCamera3?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FCamera3=0}}}):e._e(),0==a.FCamera3?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FCamera3=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("车载监控"),i("van-tag",{attrs:{type:a.FCamera4?"primary":"warning"}},[1==a.FCamera4?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FCamera4=0}}}):e._e(),0==a.FCamera4?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FCamera4=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("图片上传"),i("van-tag",{attrs:{type:a.FCamera5?"primary":"warning"}},[1==a.FCamera5?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FCamera5=0}}}):e._e(),0==a.FCamera5?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FCamera5=1}}}):e._e()],1)],1),i("div",{staticClass:"car-item-line"},[e._v("其他情况："),i("van-tag",{attrs:{type:a.FOthers?"primary":"warning"}},[1==a.FOthers?i("van-icon",{attrs:{name:"success",size:"medium"},on:{click:function(e){a.FOthers=0}}}):e._e(),0==a.FOthers?i("van-icon",{attrs:{name:"cross",size:"medium"},on:{click:function(e){a.FOthers=1}}}):e._e()],1)],1)])])}))],2),i("van-button",{staticStyle:{width:"calc(100% - 30px)",margin:"3px 15px"},attrs:{type:"primary",block:"",size:"normal",color:e.$config.theme,loading:e.loading},on:{click:e.submit}},[e._v("提交")]),i("van-popup",{attrs:{position:"bottom"},model:{value:e.timeShow,callback:function(i){e.timeShow=i},expression:"timeShow"}},[i("van-datetime-picker",{attrs:{type:"date",title:"选择日期"},on:{confirm:e.confirmTime}})],1)],1)},n=[],s={name:"CarsCheckAE",props:{},components:{},data(){return{apis:{edit:this._api.VMS_Car_CheckEdit,create:this._api.VMS_Car_CheckCreate,list:this._api.VMS_Car_CheckManage,delete:this._api.VMS_Car_CheckDelete,audit:this._api.VMS_Car_CheckAudit,details:this._api.VMS_Car_CheckDetails},loading:!1,curId:null,info:{PersonName:"",FName:"",EntryList:[]},rules:{FName:"请输入标题！",PersonId:"请选择经办人！",FDate:"请选择检查日期！"},curTimeFieldName:"",timeShow:!1}},methods:{async submit(){await this.$u.checkForm(this.info,this.rules),this.loading=!0;let e=this.curId?this.apis.edit:this.apis.create;e(this.info).then((e=>{e&&(this.$u.msg(this.info.Id?"编辑成功！":"创建成功！"),setTimeout((()=>{this.$router.back()}),200)),this.loading=!1}))},chooseTime(e){this.curTimeFieldName=e,this.timeShow=!0},confirmTime(e){this.timeShow=!1,this.info[this.curTimeFieldName]=this.$time(e).format("YYYY-MM-DD")},choosePerson(){window.temFun=e=>{this.info.PersonName=e.Fname,this.info.PersonId=e.Id},this.$router.push("/modular/oa/ChoosePerson")},VMS_CarIndex(){this._api.VMS_CarIndex().then((e=>{e&&(console.log(e.data),this.info.EntryList=e.data.map((e=>({FCarNo:e.FCarNo,CarId:e.Id,FAppearance:1,FCockpit:1,FEngineHood:1,FMeter:1,FExtinguisher:1,FVehicleSystem:1,FTyre:1,FLicenseTag:1,FRunningStatus:1,FCamera1:1,FCamera2:1,FCamera3:1,FCamera4:1,FCamera5:1,FOthers:1}))))}))}},mounted(){this.info={EntryList:[]},this.curId=this.$route.query.Id,this.VMS_CarIndex()}},r=s,c=a(3736),o=(0,c.Z)(r,t,n,!1,null,null,null),m=o.exports}}]);