"use strict";(self["webpackChunkwap"]=self["webpackChunkwap"]||[]).push([[1241],{1241:function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-page"},[t("div",{staticClass:"headerTag"},[e._v("调拨单")]),t("form",{staticClass:"h-form"},[t("item",{attrs:{name:"单据编号"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.FNumber,expression:"info.FNumber"}],domProps:{value:e.info.FNumber},on:{input:function(t){t.target.composing||e.$set(e.info,"FNumber",t.target.value)}}})]),t("item",{attrs:{must:"",name:"调拨日期"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.FDate,expression:"info.FDate"}],attrs:{readonly:""},domProps:{value:e.info.FDate},on:{click:function(t){return e.chooseTime("FDate")},input:function(t){t.target.composing||e.$set(e.info,"FDate",t.target.value)}}})]),t("item",{attrs:{must:"",name:"调出仓库"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.OutWarehouseName,expression:"info.OutWarehouseName"}],attrs:{readonly:""},domProps:{value:e.info.OutWarehouseName},on:{click:function(t){return e.chooseWarehouse(1)},input:function(t){t.target.composing||e.$set(e.info,"OutWarehouseName",t.target.value)}}})]),t("item",{attrs:{must:"",name:"调入仓库"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.InWarehouseName,expression:"info.InWarehouseName"}],attrs:{readonly:""},domProps:{value:e.info.InWarehouseName},on:{click:function(t){return e.chooseWarehouse(3)},input:function(t){t.target.composing||e.$set(e.info,"InWarehouseName",t.target.value)}}})]),t("item",{attrs:{must:"",name:"调出操作人"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.OutOperatorName,expression:"info.OutOperatorName"}],attrs:{readonly:""},domProps:{value:e.info.OutOperatorName},on:{click:function(t){return e.choosePerson(1)},input:function(t){t.target.composing||e.$set(e.info,"OutOperatorName",t.target.value)}}})]),t("item",{attrs:{must:"",name:"调入操作人"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.InOperatorName,expression:"info.InOperatorName"}],attrs:{readonly:""},domProps:{value:e.info.InOperatorName},on:{click:function(t){return e.choosePerson(3)},input:function(t){t.target.composing||e.$set(e.info,"InOperatorName",t.target.value)}}})]),t("item",{attrs:{name:"说明"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.info.Content,expression:"info.Content"}],domProps:{value:e.info.Content},on:{input:function(t){t.target.composing||e.$set(e.info,"Content",t.target.value)}}})]),t("div",{staticStyle:{display:"flex","white-wrap":"nowrap","align-items":"center","justify-content":"space-between"}},[t("div",{staticClass:"headerTag"},[e._v("物料明细")]),t("van-button",{staticStyle:{"margin-right":"15px"},attrs:{size:"small",color:e.$config.theme},on:{click:e.chooseMaterial}},[e._v("新增")])],1),e._l(e.info.EntryList,(function(i,a){return t("div",{key:a,staticClass:"car-item shadow"},[t("div",{staticClass:"car-item-line",style:{color:e.$config.theme,fontWeight:800}},[e._v("物料："+e._s(i.MaterialName))]),t("div",{staticClass:"car-item-line",staticStyle:{display:"flex","white-wrap":"nowrap","align-items":"center"}},[e._v("数量： "),t("input",{directives:[{name:"model",rawName:"v-model",value:i.Qty,expression:"item.Qty"}],staticStyle:{width:"calc(100% - 100px)",height:"26px","text-align":"left",background:"#f2f2f2"},attrs:{type:"number"},domProps:{value:i.Qty},on:{input:function(t){t.target.composing||e.$set(i,"Qty",t.target.value)}}})])])}))],2),t("van-button",{staticStyle:{width:"calc(100% - 30px)",margin:"3px 15px"},attrs:{type:"primary",block:"",size:"normal",color:e.$config.theme,loading:e.loading},on:{click:e.submit}},[e._v("提交")]),t("van-popup",{attrs:{position:"bottom"},model:{value:e.timeShow,callback:function(t){e.timeShow=t},expression:"timeShow"}},[t("van-datetime-picker",{attrs:{type:"date",title:"选择日期"},on:{confirm:e.confirmTime}})],1)],1)},o=[],n={name:"MoveBillAE",props:{},components:{},data(){return{apis:{edit:this._api.OSMS_MoveBillEdit,create:this._api.OSMS_MoveBillCreate,list:this._api.OSMS_MoveBillManage,delete:this._api.OSMS_MoveBillDelete,audit:this._api.OSMS_MoveBillAudit,details:this._api.OSMS_MoveBillDetails},loading:!1,curId:null,info:{PersonName:"",FName:"",EntryList:[]},rules:{FDate:"请选择调拨日期！",OutWarehouseName:"请选调出仓库！",InWarehouseName:"请选调入仓库！",OutOperatorName:"请选调出操作人！",InOperatorName:"请选调入操作人！"},curTimeFieldName:"",timeShow:!1,type:1}},methods:{async submit(){await this.$u.checkForm(this.info,this.rules),this.loading=!0;let e=this.curId?this.apis.edit:this.apis.create;e(this.info).then((e=>{e&&(this.$u.msg(this.info.Id?"编辑成功！":"创建成功！"),setTimeout((()=>{this.$router.back()}),200)),this.loading=!1}))},chooseTime(e){this.curTimeFieldName=e,this.timeShow=!0},confirmTime(e){this.timeShow=!1,this.info[this.curTimeFieldName]=this.$time(e).format("YYYY-MM-DD")},chooseWarehouse(e){this.type=e,window.temFun=e=>{1==this.type?(this.$set(this.info,"OutWarehouseName",e.WarehouseName),this.$set(this.info,"OutWarehouseId",e.Id)):3==this.type&&(this.$set(this.info,"InWarehouseName",e.WarehouseName),this.$set(this.info,"InWarehouseId",e.Id))},this.$router.push("/modular/oa/WarehouseChoose")},choosePerson(e){this.type=e,window.temFun=e=>{1==this.type?(this.$set(this.info,"OutOperatorName",e.Fname),this.$set(this.info,"OutOperatorId",e.Id)):3==this.type&&(this.$set(this.info,"InOperatorName",e.Fname),this.$set(this.info,"InOperatorId",e.Id))},this.$router.push("/modular/oa/ChoosePerson")},chooseMaterial(){window.temFun=e=>{this.info.EntryList.push({LotNumber:null,Qty:null,MaterialName:e.FName,MaterialId:e.Id})},this.$router.push("/modular/oa/MaterialChoose")}},mounted(){this.info={EntryList:[]},this.curId=this.$route.query.Id}},s=n,r=i(3736),m=(0,r.Z)(s,a,o,!1,null,null,null),u=m.exports}}]);
//# sourceMappingURL=1241.0df07b05.js.map