"use strict";(self["webpackChunkwap"]=self["webpackChunkwap"]||[]).push([[9330],{9330:function(t,e,i){i.r(e),i.d(e,{default:function(){return l}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-page"},[e("div",{staticClass:"headerTag"},[t._v("工作报告")]),e("form",{staticClass:"h-form"},[e("item",{attrs:{must:"",name:"寄存烟数量"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.info.FNumber,expression:"info.FNumber"}],domProps:{value:t.info.FNumber},on:{input:function(e){e.target.composing||t.$set(t.info,"FNumber",e.target.value)}}}),e("span",{staticStyle:{"font-size":"13px",width:"40px",display:"block","margin-left":"10px",color:"#666"}},[t._v("户数")])]),e("item",{staticClass:"text-one",attrs:{must:"",name:"破损烟数量"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.info.FNum,expression:"info.FNum"}],domProps:{value:t.info.FNum},on:{input:function(e){e.target.composing||t.$set(t.info,"FNum",e.target.value)}}}),e("span",{staticStyle:{"font-size":"13px",width:"40px",display:"block","margin-left":"10px",color:"#666"}},[t._v("户数")])]),e("item",{attrs:{must:"",name:"汇报日期"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.info.FTime,expression:"info.FTime"}],attrs:{readonly:""},domProps:{value:t.info.FTime},on:{click:function(e){return t.chooseTime("FTime")},input:function(e){e.target.composing||t.$set(t.info,"FTime",e.target.value)}}})]),e("item",{staticClass:"text-one",attrs:{name:"备注"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info.FContent,expression:"info.FContent"}],attrs:{placeholder:"请输入送货员、驾驶员、路线号"},domProps:{value:t.info.FContent},on:{input:function(e){e.target.composing||t.$set(t.info,"FContent",e.target.value)}}})])],1),e("van-button",{staticStyle:{width:"calc(100% - 30px)",margin:"3px 15px"},attrs:{type:"primary",block:"",size:"normal",color:t.$config.theme,loading:t.loading},on:{click:t.submit}},[t._v("提交")]),e("van-popup",{attrs:{position:"bottom"},model:{value:t.timeShow,callback:function(e){t.timeShow=e},expression:"timeShow"}},[e("van-datetime-picker",{attrs:{type:"date",title:"选择日期"},on:{confirm:t.confirmTime}})],1),e("van-popup",{attrs:{position:"bottom"},model:{value:t.pickerShow,callback:function(e){t.pickerShow=e},expression:"pickerShow"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{confirm:t.confirmPicker,cancel:function(e){t.pickerShow=!1}}})],1)],1)},s=[],a={name:"EventAE",props:{},components:{},data(){return{apis:{edit:this._api.OA_WorkReportEdit,create:this._api.OA_WorkReportCreate,list:this._api.OA_WorkReportManage,delete:this._api.OA_WorkReportDelete,audit:this._api.OA_WorkReportAudit,details:this._api.OA_WorkReportDetails},loading:!1,curId:null,info:{PersonName:"",FName:"",EventList:[]},rules:{FNumber:"请输入寄存烟数量！",FNum:"请输入破损烟数量！",FTime:"请选择汇报时间！"},curTimeFieldName:"",timeShow:!1,pickerShow:!1,classList:[],columns:[]}},methods:{async submit(){await this.$u.checkForm(this.info,this.rules),this.loading=!0;let t=this.curId?this.apis.edit:this.apis.create;t(this.info).then((t=>{t&&(this.$u.msg(this.info.Id?"编辑成功！":"创建成功！"),setTimeout((()=>{this.$router.back()}),200)),this.loading=!1}))},chooseTime(t){this.curTimeFieldName=t,this.timeShow=!0},confirmTime(t){this.timeShow=!1,this.info[this.curTimeFieldName]=this.$time(t).format("YYYY-MM-DD")},choosePerson(){window.temFun=t=>{this.$set(this.info,"PersonName",t.Fname),this.$set(this.info,"PersonId",t.Id)},this.$router.push("/modular/oa/ChoosePerson")},choosePicker(){this.pickerShow=!0},chooseCustomer(){window.temFun=t=>{this.$set(this.info,"CustomerName",t.FCustName),this.$set(this.info,"CustomerId",t.Id)},this.$router.push("/modular/oa/CustomerChoose")},confirmPicker(t,e){this.pickerShow=!1,this.info.ClassName=t,this.info.ClassId=this.classList[e].Id},OA_Event_ClassIndex(){this._api.OA_Event_ClassIndex().then((t=>{t&&(this.classList=t.data,this.columns=t.data.map((t=>t.ClassName)))}))},chooseMaterial(){window.temFun=t=>{this.info.EventList.push({FType:null,FQty:null,MaterialName:t.FName,MaterialId:t.Id})},this.$router.push("/modular/oa/MaterialChoose")}},mounted(){this.info={EventList:[]},this.curId=this.$route.query.Id,this.OA_Event_ClassIndex()}},n=a,r=i(3736),m=(0,r.Z)(n,o,s,!1,null,null,null),l=m.exports}}]);