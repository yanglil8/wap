"use strict";(self["webpackChunkwap"]=self["webpackChunkwap"]||[]).push([[6e3],{6e3:function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-page"},[t("div",{staticClass:"headerTag"},[e._v("用车单-新增")]),t("form",{staticClass:"h-form"},[t("item",{attrs:{must:"",name:"车辆"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.FCarNo,expression:"info.FCarNo"}],attrs:{readonly:""},domProps:{value:e.info.FCarNo},on:{click:function(t){return e.chooseCar()},input:function(t){t.target.composing||e.$set(e.info,"FCarNo",t.target.value)}}})]),t("item",{attrs:{must:"",name:"司机"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.DriverName,expression:"info.DriverName"}],attrs:{readonly:""},domProps:{value:e.info.DriverName},on:{click:function(t){return e.chooseDriver()},input:function(t){t.target.composing||e.$set(e.info,"DriverName",t.target.value)}}})]),t("item",{attrs:{name:"用车日期"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.FDate,expression:"info.FDate"}],attrs:{readonly:""},domProps:{value:e.info.FDate},on:{click:function(t){return e.chooseTime("FDate")},input:function(t){t.target.composing||e.$set(e.info,"FDate",t.target.value)}}})]),t("item",{attrs:{name:"里程"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.Mileage,expression:"info.Mileage"}],domProps:{value:e.info.Mileage},on:{input:function(t){t.target.composing||e.$set(e.info,"Mileage",t.target.value)}}})]),t("item",{attrs:{name:"调出仓库"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.OutWarehouseName,expression:"info.OutWarehouseName"}],attrs:{readonly:""},domProps:{value:e.info.OutWarehouseName},on:{click:function(t){return e.chooseWarehouse(1)},input:function(t){t.target.composing||e.$set(e.info,"OutWarehouseName",t.target.value)}}})]),t("item",{attrs:{name:"调入仓库"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.InWarehouseName,expression:"info.InWarehouseName"}],attrs:{readonly:""},domProps:{value:e.info.InWarehouseName},on:{click:function(t){return e.chooseWarehouse(3)},input:function(t){t.target.composing||e.$set(e.info,"InWarehouseName",t.target.value)}}})]),t("item",{attrs:{name:"选择笼车"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.CageName,expression:"info.CageName"}],attrs:{readonly:""},domProps:{value:e.info.CageName},on:{click:function(t){return e.chooseMaterial()},input:function(t){t.target.composing||e.$set(e.info,"CageName",t.target.value)}}})]),t("item",{attrs:{name:"笼车数量"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.CageQty,expression:"info.CageQty"}],domProps:{value:e.info.CageQty},on:{input:function(t){t.target.composing||e.$set(e.info,"CageQty",t.target.value)}}})]),t("item",{attrs:{name:"经办人"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.OperatorName,expression:"info.OperatorName"}],attrs:{readonly:""},domProps:{value:e.info.OperatorName},on:{click:e.choosePerson,input:function(t){t.target.composing||e.$set(e.info,"OperatorName",t.target.value)}}})]),t("item",{attrs:{name:"用车说明"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.info.FNotes,expression:"info.FNotes"}],domProps:{value:e.info.FNotes},on:{input:function(t){t.target.composing||e.$set(e.info,"FNotes",t.target.value)}}})])],1),t("van-button",{staticStyle:{width:"calc(100% - 30px)",margin:"3px 15px"},attrs:{type:"primary",block:"",size:"normal",color:e.$config.theme,loading:e.loading},on:{click:e.submit}},[e._v("提交")]),t("van-calendar",{attrs:{color:"#409eff"},on:{confirm:e.confirmTime},model:{value:e.timeShow,callback:function(t){e.timeShow=t},expression:"timeShow"}})],1)},a=[],n={name:"CarsUsingAE2",props:{},components:{},data(){return{rules:{FCarNo:"请选择车辆！",DriverName:"请选择司机！"},timeShow:!1,loading:!1,curTimeFieldName:"",info:{FType:3},type:1}},methods:{confirmTime(e){this.timeShow=!1,this.info[this.curTimeFieldName]=this.$time(e).format("YYYY-MM-DD")},chooseTime(e,t){this.curTimeFieldName=e,this.timeShow=!0},async submit(){await this.$u.checkForm(this.info,this.rules),this.loading=!0,this._api.VMS_CarUsingRecordCreate(this.info).then((e=>{e&&(this.$u.msg("操作成功！"),setTimeout((()=>{this.$router.back()}),200)),this.loading=!1}))},chooseDriver(){window.temFun=e=>{console.log(e),this.$set(this.info,"DriverId",e.Id),this.$set(this.info,"DriverName",e.FName)},this.$router.push("/modular/oa/ChooseDriver")},chooseCar(){window.temFun=e=>{this.$set(this.info,"CarId",e.Id),this.$set(this.info,"FCarNo",e.FCarNo),this.$set(this.info,"DriverId",e.DriverId),this.$set(this.info,"DriverName",e.DriverName)},this.$router.push("/modular/oa/CarsChoose")},choosePerson(){window.temFun=e=>{this.$set(this.info,"OperatorName",e.Fname),this.$set(this.info,"OperatorId",e.Id)},this.$router.push("/modular/oa/ChoosePerson")},chooseWarehouse(e){this.type=e,window.temFun=e=>{1==this.type?(this.$set(this.info,"OutWarehouseName",e.WarehouseName),this.$set(this.info,"OutWarehouseId",e.Id)):3==this.type&&(this.$set(this.info,"InWarehouseName",e.WarehouseName),this.$set(this.info,"InWarehouseId",e.Id))},this.$router.push("/modular/oa/WarehouseChoose")},chooseMaterial(){window.temFun=e=>{this.$set(this.info,"CageId",e.Id),this.$set(this.info,"CageName",e.FName)},this.$router.push("/modular/oa/MaterialChoose")}},mounted(){this.init(),this.info.FDate=this.$time(new Date).format("YYYY-MM-DD");let e=JSON.parse(localStorage.getItem("myInfo"));this.$set(this.info,"OperatorName",e.Fname),this.$set(this.info,"OperatorId",e.Id)}},s=n,r=o(3736),m=(0,r.Z)(s,i,a,!1,null,"7482964f",null),u=m.exports}}]);
//# sourceMappingURL=6000.fbbb00dd.js.map