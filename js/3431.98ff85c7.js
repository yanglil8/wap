"use strict";(self["webpackChunkwap"]=self["webpackChunkwap"]||[]).push([[3431],{3431:function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var a=function(){var e=this,t=e._self._c;return t("popup",{ref:"popup",attrs:{hasBtns:!1}},[t("form",{staticClass:"h-form"},[e._l(e.config,(function(i,a){return t("item",{directives:[{name:"show",rawName:"v-show",value:i.Visibility.includes(1),expression:"item.Visibility.includes(1)"}],key:a,attrs:{name:i.FieldName,width:i.ItemWidth||"xl",pd:""}},[t("h-renderItem",{attrs:{render:i.render,info:e.info}})],1)})),t("h-renderItem",{attrs:{render:e.customRender,info:e.info}})],2)])},s=[],r={name:"FormDetails",props:{apis:{edit:null,create:null,details:null},FormsCode:{tyep:String},customRender:{type:Function,default:()=>{}}},components:{},data(){return{info:{FStatus:1},config:[]}},methods:{async start(e){this.init(),this.$refs.popup.startLoading(),this.$refs.popup.start("详情"),await this.getDetails(e.Id),this.FormsCode&&await this.showItems(),this.fileQueryList(e.Id)},getDetails(e){return this.apis.details({Id:e}).then((e=>{e&&(e.data.isDetails=!0,this.info=e.data)}))},async showItems(){this.$createElement;let e=await this._api.BOS_FormsDetail({FormCode:this.FormsCode}),t=e.data.FieldsList.sort(((e,t)=>e.RowId-t.RowId));if(!e||!t.length)return this.$refs.popup.closeLoading();for(let i of t)if(i.Options&&i.Options.includes("{")&&(i.Options=JSON.parse(i.Options)),i.Visibility=i.Visibility?JSON.parse(i.Visibility):[],i.ApiUrl){i.render=(e,t)=>e("el-input",{attrs:{placeholder:i.Placeholder},model:{value:t[i.FieldId],callback:e=>{this.$set(t,i.FieldId,e)}}});let e=await this._api.customApi(i.ApiUrl);e&&(i.render=(t,a)=>{if(7==i.FieldType)return t("span",[e.data.filter((e=>e.Id==a[i.FieldId])).map((e=>e[i.Options.label])).join("、")]);if(9==i.FieldType)return t("treeInputMultiple",{attrs:{dataList:e.data,fieldName:i.Options.label,placeholder:i.Placeholder},model:{value:a[i.FieldId],callback:e=>{this.$set(a,i.FieldId,e)}}});if(11==i.FieldType){this.$u.arraytoTree(e.data);return t("span",[e.data.filter((e=>e.Id==a[i.FieldId])).map((e=>e[i.Options.label])).join("、")])}})}else i.render=this.getRender(i);this.config=e.data.FieldsList,this.$refs.popup.closeLoading()},getRender({FieldType:e,FieldId:t,Placeholder:i,Options:a,Unit:s,MaxValue:r,MinValue:l}){this.$createElement;return(i,l)=>{let n=i("span");switch(e){case 1:n=i("span",[l[t]]);break;case 2:n=i("span",[l[t],s]);break;case 23:n=i("span",[l[t]]);break;case 3:n=i("span",[l[t]?this.$time(l[t]).format("YYYY-MM-DD"):""]);break;case 4:n=i("span",[l[t]?this.$time(l[t]).format("YYYY-MM-DD HH:mm"):""]);break;case 5:n=i("span",[a.filter((e=>e.value==l[t])).map((e=>e.label)).join("、")]);break;case 15:n=i("h-upload",{attrs:{limitCount:"10"},ref:"upLoad"});break;case 17:n=i("h-upload",{attrs:{limitCount:r,type:"img",readonly:!0},ref:"upLoad"});break;case 19:n=i("span",[l[a]]);break}return n}},fileQueryList(e){this.$refs.upLoad&&this._api.fileQueryList({SourceId:e}).then((e=>{e&&(this.$refs.upLoad.fileList=e.data)}))}},mounted(){}},l=r,n=i(3736),d=(0,n.Z)(l,a,s,!1,null,"12c6dd32",null),o=d.exports}}]);