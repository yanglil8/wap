{"version":3,"file":"js/8208.5a091744.js","mappings":"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","sources":["webpack://wap/./src/universalPage/list/List.vue","webpack://wap/src/universalPage/list/List.vue","webpack://wap/./src/universalPage/list/List.vue?c588","webpack://wap/./src/universalPage/list/List.vue?f46d"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main-page\"},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\",\"align-items\":\"center\"}},[_c('div',{staticClass:\"headerTag\"},[_vm._v(\" \"+_vm._s(_vm.pageName)+\" [\"+_vm._s(_vm.totalcount)+\"] \")]),(_vm.aePageUrl)?_c('van-icon',{staticStyle:{\"margin-right\":\"15px\"},attrs:{\"name\":\"add-o\",\"size\":\"20px\"},on:{\"click\":function($event){return _vm.$router.push(_vm.aePageUrl)}}}):_vm._e(),(_vm.aePageUrl)?_c('div',{staticClass:\"move-btn\",on:{\"click\":function($event){return _vm.$router.push(_vm.aePageUrl)}}},[_vm._v(\"添加\")]):_vm._e()],1),_c('ScrollView',{ref:\"ScrollView\",attrs:{\"top\":\"40px\",\"bottom\":\"0\"},on:{\"down\":_vm.down,\"upFun\":_vm.up}},_vm._l((_vm.dataList),function(item,index){return _c('div',{key:index,staticClass:\"shadow list-item\"},[_vm._l((_vm.tableLines),function(it,index){return _c('h-renderItem',{key:index,attrs:{\"render\":it.render,\"info\":item}})}),(_vm.showBtn && (item.FStatus==1||!item.FStatus))?_c('van-button',{staticStyle:{\"margin\":\"6px 0 0 calc(100% - 34px)\"},attrs:{\"color\":\"#409eff\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.$emit('confirm',item)}}},[_vm._v(\"确认\")]):_vm._e()],2)}),0),(_vm.loading)?_c('hLoading'):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"main-page\">\r\n        <div style=\"display: flex; justify-content: space-between; align-items: center\">\r\n            <div class=\"headerTag\">\r\n                {{ pageName }}\r\n                [{{ totalcount }}]\r\n            </div>\r\n            <van-icon name=\"add-o\" style=\"margin-right: 15px\" size=\"20px\" @click=\"$router.push(aePageUrl)\" v-if=\"aePageUrl\" />\r\n            <!-- <div class=\"add\" @click=\"$router.push(aePageUrl)\" v-if=\"aePageUrl\">一键添加</div> -->\r\n            <div class=\"move-btn\" @click=\"$router.push(aePageUrl)\" v-if=\"aePageUrl\">添加</div>\r\n        </div>\r\n\r\n        <ScrollView ref=\"ScrollView\" top=\"40px\" bottom=\"0\" @down=\"down\" @upFun=\"up\">\r\n            <div v-for=\"(item, index) in dataList\" :key=\"index\" class=\"shadow list-item\">\r\n                <h-renderItem :render=\"it.render\" v-for=\"(it, index) in tableLines\" :key=\"index\" :info=\"item\" />\r\n                <van-button v-if=\"showBtn && (item.FStatus==1||!item.FStatus)\" color=\"#409eff\" size=\"mini\" style=\"margin:6px 0 0 calc(100% - 34px)\" @click=\"$emit('confirm',item)\">确认</van-button>\r\n            </div>\r\n        </ScrollView>\r\n        <hLoading v-if=\"loading\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Loading from \"@/views/login/Loading.vue\";\r\nexport default {\r\n    name: \"Class\",\r\n    props: {\r\n        // 接口列表\r\n        apis: {\r\n            type: Object,\r\n            default: () => {\r\n                return {\r\n                    edit: null,\r\n                    create: null,\r\n                    list: null,\r\n                    delete: null,\r\n                    audit: null,\r\n                    details: null,\r\n                };\r\n            },\r\n        },\r\n        // 字段跳转列表  field：ref\r\n        fieldToPage: {\r\n            type: Object,\r\n            default: () => {\r\n                return {};\r\n            },\r\n        },\r\n        // 自定义表单列表\r\n        FormCode: {\r\n            type: String,\r\n            default: \"\",\r\n        },\r\n        // 是否需要nav\r\n        hasNav: {\r\n            type: Boolean,\r\n            default: () => true,\r\n        },\r\n        // 渲染函数\r\n        render: {\r\n            type: Function,\r\n        },\r\n        //\r\n        searchInfo: {\r\n            type: Object,\r\n            default: () => { },\r\n        },\r\n        FormsCode: {\r\n            type: String,\r\n            default: null,\r\n        },\r\n        aePageUrl: String,\r\n        showBtn: {\r\n            type: Boolean,\r\n            default: () => false\r\n        }\r\n    },\r\n    components: {\r\n        Loading,\r\n    },\r\n    data() {\r\n        return {\r\n            dataList: [],\r\n            tableLines: [],\r\n            backupTableLines: [],\r\n            loading: true,\r\n            pageName: \"\",\r\n            showMore: true,\r\n            totalcount: null\r\n        };\r\n    },\r\n\r\n    methods: {\r\n        down(instance) {\r\n            this.$refs[\"ScrollView\"].reUp();\r\n        },\r\n        // 上拉加载\r\n        up([page, instance]) {\r\n            this.apis.list ? this.apis.list({\r\n                ...this.searchInfo,\r\n                Page: page.num,\r\n                PageSize: page.size,\r\n            }).then((res) => {\r\n                if (res) {\r\n                    let arr = res.data;\r\n                    this.totalcount = res.totalcount;\r\n                    if (page.num === 1) this.dataList = [];\r\n                    this.dataList = this.dataList.concat(arr);\r\n                    this.$nextTick(() => {\r\n                        instance.endSuccess(arr.length);\r\n                    });\r\n                }\r\n            }) : \"\";\r\n        },\r\n\r\n        // 填充表格\r\n        async fullTable() {\r\n            if (!this.FormCode) return;\r\n            let form = await this._api.BOS_FormsDetail({ FormCode: this.FormCode });\r\n            if (form.data.FieldsList.length) {\r\n                form.data.FieldsList = form.data.FieldsList.filter(item=>item.FStatus !== 1)\r\n                console.log(form.data.FieldsList)\r\n                form.data.FieldsList.sort((a, b) => a.RowId - b.RowId);\r\n                for (let it of form.data.FieldsList) {\r\n                    //遍历FieldsList列表\r\n                    if (it.Options && it.Options.includes(\"{\"))\r\n                        it.Options = JSON.parse(it.Options);\r\n                    it.Visibility = it.Visibility ? JSON.parse(it.Visibility) : [];\r\n                    let obj = {\r\n                        render: (h, info) => {\r\n                            return (\r\n                                <ListLine name={it.FieldName}>{info[it.FieldId]}</ListLine>\r\n                            );\r\n                        },\r\n                    };\r\n\r\n                    if (it.ApiUrl) {\r\n                        let result = await this._api.customApi(it.ApiUrl);\r\n                        if (result) {\r\n                            if (\r\n                                it.FieldType == 7 ||\r\n                                it.FieldType == 11 ||\r\n                                it.FieldType == 9\r\n                            ) {\r\n                                obj.render = (h, info) => {\r\n                                    return (\r\n                                        <ListLine name={it.FieldName}>\r\n                                            {result.data\r\n                                                .filter((iter) => iter.Id == info[it.FieldId])\r\n                                                .map((iter) => iter[it.Options.label])\r\n                                                .join(\"、\")}\r\n                                        </ListLine>\r\n                                    );\r\n                                };\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (it.FieldType == 17) {\r\n                            obj.render = (h, info) => {\r\n                                return (\r\n                                    <ListLine name={it.FieldName}>\r\n                                        <img\r\n                                            src={info[it.FieldId]}\r\n                                            style=\"height:40px\"\r\n                                            onClick={(e) => this.preImage(info[it.FieldId])}\r\n                                        />\r\n                                    </ListLine>\r\n                                );\r\n                            };\r\n                        }\r\n                        if (it.FieldType == 3) {\r\n                            obj.render = (h, info) => {\r\n                                return (\r\n                                    <ListLine name={it.FieldName}>\r\n                                        {info[it.FieldId]\r\n                                            ? this.$time(info[it.FieldId]).format(\"YYYY-MM-DD\")\r\n                                            : null}\r\n                                    </ListLine>\r\n                                );\r\n                            };\r\n                        }\r\n                        if (it.FieldType == 19) {\r\n                            obj.render = (h, info) => {\r\n                                return (\r\n                                    <ListLine name={it.FieldName}>\r\n                                        {it.Options ? info[it.Options] : null}\r\n                                    </ListLine>\r\n                                );\r\n                            };\r\n                        }\r\n                    }\r\n                    this.tableLines.push(obj);\r\n                }\r\n                this.tableLines.push({\r\n                    render: (h, info) => {\r\n                        return (\r\n                            <div>\r\n                                <ListLine name=\"创建人\">{info[\"CreateName\"]}</ListLine>\r\n                                <ListLine name=\"创建时间\">{info[\"CreateTime\"]}</ListLine>\r\n                            </div>\r\n                        );\r\n                    },\r\n                });\r\n                this.loading = false;\r\n                // this.backupTableLines = this.tableLines\r\n            }\r\n        }\r\n    },\r\n\r\n    async mounted() {\r\n        this.init();\r\n        this.pageName = sessionStorage.getItem(\"pageName\");\r\n        await this.fullTable();\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.list-item {\r\n    width: calc(100% - 30px);\r\n    margin: 5px auto 10px;\r\n    padding: 0 15px 10px;\r\n    border-radius: 3px;\r\n}\r\n\r\n// .add{\r\n// \ttext-align: center;\r\n// \twidth: 35px;\r\n// \theight:120px;\r\n// \tposition: fixed;\r\n// \tright: 0;\r\n// \ttop: 60%;\r\n// \tbackground-color: #07c160;\r\n// \tz-index: 1000;\r\n// \tfont-size:20px;\r\n// \tcolor: white;\r\n// \tborder-radius:10px;\r\n// }\r\n.move-btn {\r\n    position: absolute;\r\n    bottom: 200px;\r\n    right: 10px;\r\n    width: 50px;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    text-align: center;\r\n    border-radius: 50%;\r\n    font-size: 12px;\r\n    background: #409eff;\r\n    color: #fff;\r\n    z-index: 1000;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=25caf406&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\nimport style0 from \"./List.vue?vue&type=style&index=0&id=25caf406&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25caf406\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","_v","_s","pageName","totalcount","aePageUrl","attrs","on","$event","$router","push","_e","ref","down","up","_l","dataList","item","index","key","tableLines","it","showBtn","FStatus","$emit","loading","staticRenderFns","name","props","apis","type","default","edit","create","list","delete","audit","details","fieldToPage","FormCode","hasNav","searchInfo","FormsCode","components","Loading","data","backupTableLines","showMore","methods","Page","PageSize","instance","form","console","obj","result","filter","map","join","info","e","component"],"sourceRoot":""}