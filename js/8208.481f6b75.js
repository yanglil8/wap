"use strict";(self["webpackChunkwap"]=self["webpackChunkwap"]||[]).push([[8208,8963],{7808:function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-page"},[t("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[t("div",{staticClass:"headerTag"},[e._v(" "+e._s(e.pageName)+" ["+e._s(e.totalcount)+"] ")]),e.aePageUrl?t("van-icon",{staticStyle:{"margin-right":"15px"},attrs:{name:"add-o",size:"20px"},on:{click:function(t){return e.$router.push(e.aePageUrl)}}}):e._e(),e.aePageUrl?t("div",{staticClass:"move-btn",on:{click:function(t){return e.$router.push(e.aePageUrl)}}},[e._v("添加")]):e._e()],1),t("ScrollView",{ref:"ScrollView",attrs:{top:"40px",bottom:"0"},on:{down:e.down,upFun:e.up}},e._l(e.dataList,(function(i,a){return t("div",{key:a,staticClass:"shadow list-item"},[e._l(e.tableLines,(function(e,a){return t("h-renderItem",{key:a,attrs:{render:e.render,info:i}})})),!e.showBtn||1!=i.FStatus&&i.FStatus?e._e():t("van-button",{staticStyle:{margin:"6px 0 0 calc(100% - 34px)"},attrs:{color:"#409eff",size:"mini"},on:{click:function(t){return e.$emit("confirm",i)}}},[e._v("确认")])],2)})),0),e.loading?t("hLoading"):e._e()],1)},s=[],n=i(3903),l={name:"Class",props:{apis:{type:Object,default:()=>({edit:null,create:null,list:null,delete:null,audit:null,details:null})},fieldToPage:{type:Object,default:()=>({})},FormCode:{type:String,default:""},hasNav:{type:Boolean,default:()=>!0},render:{type:Function},searchInfo:{type:Object,default:()=>{}},FormsCode:{type:String,default:null},aePageUrl:String,showBtn:{type:Boolean,default:()=>!1}},components:{Loading:n["default"]},data(){return{dataList:[],tableLines:[],backupTableLines:[],loading:!0,pageName:"",showMore:!0,totalcount:null}},methods:{down(e){this.$refs["ScrollView"].reUp()},up([e,t]){this.apis.list&&this.apis.list({...this.searchInfo,Page:e.num,PageSize:e.size}).then((i=>{if(i){let a=i.data;this.totalcount=i.totalcount,1===e.num&&(this.dataList=[]),this.dataList=this.dataList.concat(a),this.$nextTick((()=>{t.endSuccess(a.length)}))}}))},async fullTable(){this.$createElement;if(!this.FormCode)return;let e=await this._api.BOS_FormsDetail({FormCode:this.FormCode});if(e.data.FieldsList.length){e.data.FieldsList=e.data.FieldsList.filter((e=>1!==e.FStatus)),console.log(e.data.FieldsList),e.data.FieldsList.sort(((e,t)=>e.RowId-t.RowId));for(let t of e.data.FieldsList){t.Options&&t.Options.includes("{")&&(t.Options=JSON.parse(t.Options)),t.Visibility=t.Visibility?JSON.parse(t.Visibility):[];let e={render:(e,i)=>e("ListLine",{attrs:{name:t.FieldName}},[i[t.FieldId]])};if(t.ApiUrl){let i=await this._api.customApi(t.ApiUrl);i&&(7!=t.FieldType&&11!=t.FieldType&&9!=t.FieldType||(e.render=(e,a)=>e("ListLine",{attrs:{name:t.FieldName}},[i.data.filter((e=>e.Id==a[t.FieldId])).map((e=>e[t.Options.label])).join("、")])))}else 17==t.FieldType&&(e.render=(e,i)=>e("ListLine",{attrs:{name:t.FieldName}},[e("img",{attrs:{src:i[t.FieldId]},style:"height:40px",on:{click:e=>this.preImage(i[t.FieldId])}})])),3==t.FieldType&&(e.render=(e,i)=>e("ListLine",{attrs:{name:t.FieldName}},[i[t.FieldId]?this.$time(i[t.FieldId]).format("YYYY-MM-DD"):null])),19==t.FieldType&&(e.render=(e,i)=>e("ListLine",{attrs:{name:t.FieldName}},[t.Options?i[t.Options]:null]));this.tableLines.push(e)}this.tableLines.push({render:(e,t)=>e("div",[e("ListLine",{attrs:{name:"创建人"}},[t["CreateName"]]),e("ListLine",{attrs:{name:"创建时间"}},[t["CreateTime"]])])}),this.loading=!1}}},async mounted(){this.init(),this.pageName=sessionStorage.getItem("pageName"),await this.fullTable()}},r=l,d=i(3736),o=(0,d.Z)(r,a,s,!1,null,"25caf406",null),u=o.exports}}]);