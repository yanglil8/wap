"use strict";(self["webpackChunkwap"]=self["webpackChunkwap"]||[]).push([[3559],{3559:function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-page"},[t("div",{staticClass:"headerTag"},[e._v("事件上报")]),t("form",{staticClass:"h-form"},[t("item",{attrs:{must:"",name:"事件标题"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.ClassName,expression:"info.ClassName"}],attrs:{readonly:""},domProps:{value:e.info.ClassName},on:{click:function(t){return e.choosePicker()},input:function(t){t.target.composing||e.$set(e.info,"ClassName",t.target.value)}}})]),t("item",{attrs:{must:"",name:"地点"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.FSite,expression:"info.FSite"}],domProps:{value:e.info.FSite},on:{input:function(t){t.target.composing||e.$set(e.info,"FSite",t.target.value)}}})]),t("item",{attrs:{must:"",name:"上报人"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.PersonName,expression:"info.PersonName"}],attrs:{readonly:""},domProps:{value:e.info.PersonName},on:{click:function(t){return e.choosePerson()},input:function(t){t.target.composing||e.$set(e.info,"PersonName",t.target.value)}}})]),t("item",{attrs:{must:"",name:"上报日期"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.FTime,expression:"info.FTime"}],attrs:{readonly:""},domProps:{value:e.info.FTime},on:{click:function(t){return e.chooseTime("FTime")},input:function(t){t.target.composing||e.$set(e.info,"FTime",t.target.value)}}})]),t("item",{attrs:{must:"",name:"零售户"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.CustomerName,expression:"info.CustomerName"}],attrs:{readonly:""},domProps:{value:e.info.CustomerName},on:{click:function(t){return e.chooseCustomer()},input:function(t){t.target.composing||e.$set(e.info,"CustomerName",t.target.value)}}})]),t("item",{attrs:{must:"",name:"零售户单据体"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.CustomerName,expression:"info.CustomerName"}],domProps:{value:e.info.CustomerName},on:{input:function(t){t.target.composing||e.$set(e.info,"CustomerName",t.target.value)}}})]),t("item",{attrs:{must:"",name:"图片上传"}},[t("van-uploader",{attrs:{multiple:"","max-count":2},model:{value:e.info.fileList,callback:function(t){e.$set(e.info,"fileList",t)},expression:"info.fileList"}})],1),t("item",{attrs:{name:"说明"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.info.FContent,expression:"info.FContent"}],domProps:{value:e.info.FContent},on:{input:function(t){t.target.composing||e.$set(e.info,"FContent",t.target.value)}}})]),t("div",{staticStyle:{display:"flex","white-wrap":"nowrap","align-items":"center","justify-content":"space-between"}},[t("div",{staticClass:"headerTag"},[e._v("商品明细")]),t("van-button",{staticStyle:{"margin-right":"15px"},attrs:{size:"small",color:e.$config.theme},on:{click:e.chooseMaterial}},[e._v("新增")])],1),e._l(e.info.EventList,(function(i,a){return t("div",{key:a,staticClass:"car-item shadow"},[t("div",{staticClass:"car-item-line",style:{color:e.$config.theme,fontWeight:800}},[e._v(" 商品："+e._s(i.MaterialName)+" ")]),t("div",{staticClass:"car-item-line",staticStyle:{display:"flex","white-wrap":"nowrap","align-items":"center"}},[e._v(" 代码： ")]),t("div",{staticClass:"car-item-line",staticStyle:{display:"flex","white-wrap":"nowrap","align-items":"center"}},[e._v(" 类型： "),t("van-radio-group",{model:{value:i.FType,callback:function(t){e.$set(i,"FType",t)},expression:"item.FType"}},[t("van-radio",{attrs:{name:1}},[e._v("寄")]),t("van-radio",{attrs:{name:3}},[e._v("存")])],1)],1),t("div",{staticClass:"car-item-line",staticStyle:{display:"flex","white-wrap":"nowrap","align-items":"center"}},[e._v(" 数量： "),t("input",{directives:[{name:"model",rawName:"v-model",value:i.FQty,expression:"item.FQty"}],staticStyle:{width:"calc(100% - 100px)",height:"26px","text-align":"left",background:"#f2f2f2"},attrs:{type:"number"},domProps:{value:i.FQty},on:{input:function(t){t.target.composing||e.$set(i,"FQty",t.target.value)}}})])])}))],2),t("van-button",{staticStyle:{width:"calc(100% - 30px)",margin:"3px 15px"},attrs:{type:"primary",block:"",size:"normal",color:e.$config.theme,loading:e.loading},on:{click:e.submit}},[e._v("提交")]),t("van-popup",{attrs:{position:"bottom"},model:{value:e.timeShow,callback:function(t){e.timeShow=t},expression:"timeShow"}},[t("van-datetime-picker",{attrs:{type:"date",title:"选择日期"},on:{confirm:e.confirmTime}})],1),t("van-popup",{attrs:{position:"bottom"},model:{value:e.pickerShow,callback:function(t){e.pickerShow=t},expression:"pickerShow"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.columns},on:{confirm:e.confirmPicker,cancel:function(t){e.pickerShow=!1}}})],1)],1)},o=[],s={name:"EventAE",props:{},components:{},data(){return{apis:{edit:this._api.OA_Event_ReportingEdit,create:this._api.OA_Event_ReportingCreate,list:this._api.OA_Event_ReportingManage,delete:this._api.OA_Event_ReportingDelete,audit:this._api.OA_Event_ReportingAudit,details:this._api.OA_Event_ReportingDetails},loading:!1,curId:null,info:{PersonName:"",FName:"",EventList:[],fileList:[]},rules:{ClassId:"请输入事件标题！",FSite:"请输入地点！",PersonId:"请选择上报人！",FTime:"请选择上报日期！"},curTimeFieldName:"",timeShow:!1,pickerShow:!1,classList:[],columns:[]}},methods:{afterRead(){console.log(11)},async submit(){await this.$u.checkForm(this.info,this.rules),this.loading=!0;let e=this.curId?this.apis.edit:this.apis.create;e(this.info).then((e=>{e&&(this.$u.msg(this.info.Id?"编辑成功！":"创建成功！"),setTimeout((()=>{this.$router.back()}),200)),this.loading=!1}))},chooseTime(e){this.curTimeFieldName=e,this.timeShow=!0},confirmTime(e){this.timeShow=!1,this.info[this.curTimeFieldName]=this.$time(e).format("YYYY-MM-DD")},choosePerson(){window.temFun=e=>{this.$set(this.info,"PersonName",e.Fname),this.$set(this.info,"PersonId",e.Id)},this.$router.push("/modular/oa/ChoosePerson")},choosePicker(){this.pickerShow=!0},chooseCustomer(){window.temFun=e=>{this.$set(this.info,"CustomerName",e.FCustName),this.$set(this.info,"CustomerId",e.Id)},this.$router.push("/modular/oa/CustomerChoose")},confirmPicker(e,t){this.pickerShow=!1,this.info.ClassName=e,this.info.ClassId=this.classList[t].Id},OA_Event_ClassIndex(){this._api.OA_Event_ClassIndex().then((e=>{e&&(this.classList=e.data,this.columns=e.data.map((e=>e.ClassName)))}))},chooseMaterial(){window.temFun=e=>{this.info.EventList.push({FType:null,FQty:null,MaterialName:e.FName,MaterialId:e.Id})},this.$router.push("/modular/oa/MaterialChoose")}},mounted(){this.info={EventList:[]},this.curId=this.$route.query.Id,this.OA_Event_ClassIndex()}},n=s,r=i(3736),m=(0,r.Z)(n,a,o,!1,null,null,null),l=m.exports}}]);
//# sourceMappingURL=3559.30c8a041.js.map