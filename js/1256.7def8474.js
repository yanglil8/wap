"use strict";(self["webpackChunkwap"]=self["webpackChunkwap"]||[]).push([[1256],{1256:function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-page"},[t("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[t("div",{staticClass:"headerTag"},[e._v(" "+e._s(e.pageName)+" ["+e._s(e.totalcount)+"] ")])]),t("ScrollView",{ref:"ScrollView",attrs:{top:"40px",bottom:"0"},on:{down:e.down,upFun:e.up}},e._l(e.dataList,(function(i,a){return t("div",{key:a,staticClass:"shadow list-item"},[t("ListLine",{attrs:{name:"车辆"}},[e._v(e._s(i.FCarNo))]),t("ListLine",{attrs:{name:"司机"}},[e._v(e._s(i.DriverName))]),t("ListLine",{attrs:{name:"用车日期"}},[e._v(e._s(e.$time(i.FDate).format("YYYY-MM-DD")))]),t("ListLine",{attrs:{name:"开始时间"}},[i.StartTime?t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(i.StartTime))]):e._e(),t("van-button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.openPopup("StartTime",i)}}},[e._v("发车确认")])],1),t("ListLine",{attrs:{name:"结束时间"}},[i.EndTime?t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(i.EndTime))]):e._e(),t("van-button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.openPopup("EndTime",i)}}},[e._v("还车确认")])],1),t("ListLine",{attrs:{name:"开始地点"}},[e._v(e._s(i.FStartSite))]),t("ListLine",{attrs:{name:"结束地点"}},[e._v(e._s(i.FEndSite))]),t("ListLine",{attrs:{name:"创建人"}},[e._v(e._s(i.CreateTime))]),t("ListLine",{attrs:{name:"创建时间"}},[e._v(e._s(i.CreateName))])],1)})),0),e.loading?t("hLoading"):e._e(),t("van-popup",{attrs:{position:"top"},model:{value:e.timeShow,callback:function(t){e.timeShow=t},expression:"timeShow"}},[t("div",{staticStyle:{padding:"150px 15px 0 15px"}},["StartTime"==e.curTimeFieldName?t("ListLine",{attrs:{name:"用车开始时间"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.curRow.StartTime,expression:"curRow.StartTime"}],domProps:{value:e.curRow.StartTime},on:{input:function(t){t.target.composing||e.$set(e.curRow,"StartTime",t.target.value)}}})]):e._e(),"EndTime"==e.curTimeFieldName?t("ListLine",{attrs:{name:"用车结束时间"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.curRow.EndTime,expression:"curRow.EndTime"}],domProps:{value:e.curRow.EndTime},on:{input:function(t){t.target.composing||e.$set(e.curRow,"EndTime",t.target.value)}}})]):e._e(),"EndTime"==e.curTimeFieldName?t("ListLine",{attrs:{name:"结束里程"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.curRow.Mileage,expression:"curRow.Mileage"}],domProps:{value:e.curRow.Mileage},on:{input:function(t){t.target.composing||e.$set(e.curRow,"Mileage",t.target.value)}}})]):e._e(),"StartTime"==e.curTimeFieldName?t("ListLine",{attrs:{name:"开始里程"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.curRow.Mileage,expression:"curRow.Mileage"}],domProps:{value:e.curRow.Mileage},on:{input:function(t){t.target.composing||e.$set(e.curRow,"Mileage",t.target.value)}}})]):e._e(),t("van-button",{staticStyle:{width:"calc(100% - 30px)",margin:"15px"},attrs:{type:"primary",block:"",color:e.$config.theme},on:{click:e.confirmPopup}},[e._v("确 认")])],1)])],1)},n=[],s={name:"Class",components:{},data(){return{dataList:[],loading:!0,pageName:"",totalcount:null,timeShow:!1,curRow:{},curTimeFieldName:""}},methods:{down(e){this.$refs["ScrollView"].reUp()},up([e,t]){this._api.VMS_CarUsingRecordIndex({...this.searchInfo,Page:e.num,PageSize:e.size}).then((i=>{if(i){let a=i.data;this.totalcount=i.totalcount,1===e.num&&(this.dataList=[]),this.dataList=this.dataList.concat(a),console.log(this.dataList),this.$nextTick((()=>{t.endSuccess(a.length)}))}this.loading=!1}))},openPopup(e,t){this.curRow=t,this.curTimeFieldName=e,this.timeShow=!0,t[e]=this.$time(new Date).format("YYYY-MM-DD HH:mm")},confirmPopup(){this.timeShow=!1;let e=this.curTimeFieldName=={FieldsNames:"StartTime"}?"StartTime":{FieldsNames:"StartTime,Mileage"};this._api.VMS_CarUsingRecordEdit(this.curRow,e).then((e=>{}))}},async mounted(){this.init(),this.pageName=sessionStorage.getItem("pageName")}},o=s,r=i(3736),m=(0,r.Z)(o,a,n,!1,null,"24289ead",null),l=m.exports}}]);
//# sourceMappingURL=1256.7def8474.js.map