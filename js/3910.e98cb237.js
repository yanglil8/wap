"use strict";(self["webpackChunkwap"]=self["webpackChunkwap"]||[]).push([[3910],{3910:function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-page"},[t("div",{staticClass:"h-title"},[e._v("一键发车")]),t("form",{staticClass:"h-form"},e._l(e.carList,(function(i,a){return t("div",{key:a,staticClass:"car-item shadow",on:{click:function(t){return e.chooseItem(i)}}},[t("div",{staticClass:"car-item-top",class:i.checked&&"active"},[t("div",{staticClass:"car-item-top-l"},[t("div",{staticClass:"line"}),e._v(" 车牌号："+e._s(i.FCarNo)+" ")]),i.checked?t("img",{attrs:{src:"/static/img/checked.png"}}):e._e(),i.checked?e._e():t("img",{attrs:{src:"/static/img/nchecked.png"}})]),t("div",{staticClass:"car-item-bottom",class:i.checked&&"active"},[t("div",{staticClass:"car-item-line"},[t("span",[e._v("司机：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:i.DriverName,expression:"item.DriverName"}],domProps:{value:i.DriverName},on:{click:function(t){return e.chooseDriver(i)},input:function(t){t.target.composing||e.$set(i,"DriverName",t.target.value)}}})]),t("div",{staticClass:"car-item-line"},[t("span",[e._v("用车日期：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:i.FDate,expression:"item.FDate"}],attrs:{readonly:""},domProps:{value:i.FDate},on:{click:function(t){return t.stopPropagation(),e.chooseTime("FDate",i)},input:function(t){t.target.composing||e.$set(i,"FDate",t.target.value)}}})]),t("div",{staticClass:"car-item-line"},[t("span",[e._v("出发地：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:i.FStartSite,expression:"item.FStartSite"}],domProps:{value:i.FStartSite},on:{input:function(t){t.target.composing||e.$set(i,"FStartSite",t.target.value)}}})]),t("div",{staticClass:"car-item-line"},[t("span",[e._v("目的地：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:i.FEndSite,expression:"item.FEndSite"}],staticStyle:{"margin-left":"14px"},domProps:{value:i.FEndSite},on:{input:function(t){t.target.composing||e.$set(i,"FEndSite",t.target.value)}}})])])])})),0),t("van-button",{staticStyle:{width:"calc(100% - 30px)",margin:"3px 15px"},attrs:{type:"primary",block:"",size:"normal",color:e.$config.theme,loading:e.loading},on:{click:e.submit}},[e._v("提交")]),t("van-calendar",{attrs:{color:"#409eff"},on:{confirm:e.confirmTime},model:{value:e.timeShow,callback:function(t){e.timeShow=t},expression:"timeShow"}})],1)},s=[],r={name:"CarsUsingAE",props:{},components:{},data(){return{apis:{edit:this._api.VMS_CarUsingRecordEdit,create:this._api.VMS_CarUsingRecordCreateBulk,list:this._api.VMS_CarUsingRecordManage,delete:this._api.VMS_CarUsingRecordDelete,audit:this._api.VMS_CarUsingRecordAudit,details:this._api.VMS_CarUsingRecordDetails},carList:[],rules:{},timeShow:!1,loading:!1,curTimeFieldName:"",curRow:{}}},methods:{VMS_CarIndex(){this._api.VMS_CarIndex().then((e=>{e&&(this.carList=e.data.map((e=>({checked:!1,FDate:this.$time(new Date).format("YYYY-MM-DD"),CarId:e.Id,FCarNo:e.FCarNo,DriverName:e.DriverName,DriverId:e.DriverId,FStartSite:"物流中心",FEndSite:"物流中心"}))))}))},confirmTime(e){this.timeShow=!1,this.curRow[this.curTimeFieldName]=this.$time(e).format("YYYY-MM-DD")},chooseTime(e,t){this.curRow=t,this.curTimeFieldName=e,this.timeShow=!0},async submit(){await this.$u.checkForm(this.info,this.rules);let e=this.carList.filter((e=>e.checked));if(0==e.length)return this.$u.msg("请选择车辆");this.loading=!0;let t=this.curId?this.apis.edit:this.apis.create;t(e).then((e=>{e&&(this.$u.msg("操作成功！"),setTimeout((()=>{this.$router.back()}),200)),this.loading=!1}))},chooseItem(e){e.checked=!e.checked},chooseDriver(e){window.temFun=t=>{this.$set(e,"DriverName",t)},this.$router.push("/modular/oa/ChooseDriver")}},mounted(){this.VMS_CarIndex()}},c=r,o=i(3736),n=(0,o.Z)(c,a,s,!1,null,"d0be60b6",null),m=n.exports}}]);
//# sourceMappingURL=3910.e98cb237.js.map