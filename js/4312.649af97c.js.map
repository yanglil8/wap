{"version":3,"file":"js/4312.649af97c.js","mappings":"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","sources":["webpack://wap/./src/views/home/notice/Notice.vue","webpack://wap/src/views/home/notice/Notice.vue","webpack://wap/./src/views/home/notice/Notice.vue?5e9f","webpack://wap/./src/views/home/notice/Notice.vue?8823"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"content-main\"},[_c('div',{staticClass:\"flex divider\"},[_c('div',{staticClass:\"headerTag\"},[_vm._v(\"全部消息\")]),_c('div',{staticClass:\"h-switch\"},_vm._l((_vm.switchList),function(item,index){return _c('div',{key:index,staticClass:\"h-switch-item\",class:_vm.currentIndex==index&&'active',on:{\"click\":function($event){return _vm.changeSwitch(item,index)}}},[_vm._v(_vm._s(item.ClassName))])}),0)]),_c('div',{staticClass:\"notify_search\"},[_c('van-icon',{attrs:{\"name\":\"search\"}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchInfo.keyWord),expression:\"searchInfo.keyWord\"}],staticClass:\"org_search_input\",attrs:{\"placeholder\":\"请输入关键字\"},domProps:{\"value\":(_vm.searchInfo.keyWord)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.searchInfo, \"keyWord\", $event.target.value)}}})],1),_c('div',{staticClass:\"notify_topic\"},_vm._l((_vm.topicList),function(item,index){return _c('div',{key:index,staticClass:\"notify_topic_item\",style:(_vm.currentType==item.Id&&{color:'#5284f7'}),on:{\"click\":function($event){return _vm.change(item)}}},[_c('i',{staticClass:\"iconfont\",class:item.icon,style:(_vm.currentType==item.Id&&{color:'#5284f7'})}),_c('span',{staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(_vm._s(item.TopicName))])])}),0),_c('ScrollView',{ref:\"ScrollView\",attrs:{\"top\":\"160px\",\"bottom\":\"0\"},on:{\"down\":_vm.down,\"upFun\":_vm.up}},_vm._l((_vm.dataList),function(item,index){return _c('div',{key:index,staticClass:\"notify_list_item\",on:{\"click\":function($event){return _vm.toDetails(item)}}},[_c('div',{staticClass:\"notify_list_item_img\"},[_c('i',{staticClass:\"iconfont icon-myNotice\"})]),_c('div',{staticClass:\"notify_list_item_content\"},[(item.isRead)?_c('image',{staticClass:\"notify_ststus\",attrs:{\"src\":\"/static/img/status/status23.png\",\"mode\":\"widthFix\"}}):_vm._e(),(!item.isRead)?_c('image',{staticClass:\"notify_ststus\",attrs:{\"src\":\"/static/img/status/status24.png\",\"mode\":\"widthFix\"}}):_vm._e(),_c('div',{staticClass:\"h_line_title hidden-one\"},[_vm._v(\" \"+_vm._s(item.Title?item.Title:item.TaskName)+\" \")]),_c('div',{staticClass:\"h_line_time\"},[_vm._v(\" \"+_vm._s(_vm.$time(item.CreateTime).format(\"YYYY-MM-DD HH:mm\"))+\" \")])])])}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"content-main\">\r\n        <div class=\"flex divider\">\r\n            <div class=\"headerTag \">全部消息</div>\r\n            <div class=\"h-switch\">\r\n                <div class=\"h-switch-item\" v-for=\"(item,index) in switchList\" :key=\"index\" :class=\"currentIndex==index&&'active'\" @click=\"changeSwitch(item,index)\">{{item.ClassName}}</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"notify_search\">\r\n            <van-icon name=\"search\" />\r\n            <input class=\"org_search_input\" placeholder=\"请输入关键字\" v-model=\"searchInfo.keyWord\" />\r\n        </div>\r\n\r\n        <div class=\"notify_topic\">\r\n            <div class=\"notify_topic_item\" v-for=\"(item,index) in topicList\" :key=\"index\" @click=\"change(item)\" :style=\"currentType==item.Id&&{color:'#5284f7'}\">\r\n                <i class=\"iconfont\" :class=\"item.icon\" :style=\"currentType==item.Id&&{color:'#5284f7'}\" />\r\n                <span style=\"white-space: nowrap;\">{{item.TopicName}}</span>\r\n            </div>\r\n        </div>\r\n        <ScrollView ref=\"ScrollView\" top=\"160px\" bottom=\"0\" @down=\"down\" @upFun=\"up\">\r\n            <div class=\"notify_list_item\" v-for=\"(item,index) in dataList\" :key=\"index\" @click=\"toDetails(item)\">\r\n                <div class=\"notify_list_item_img\">\r\n                    <i class=\"iconfont icon-myNotice\" />\r\n                </div>\r\n                <div class=\"notify_list_item_content\">\r\n                    <image src=\"/static/img/status/status23.png\" class=\"notify_ststus\" mode=\"widthFix\" v-if=\"item.isRead\"></image>\r\n                    <image src=\"/static/img/status/status24.png\" class=\"notify_ststus\" mode=\"widthFix\" v-if=\"!item.isRead\"></image>\r\n                    <div class=\"h_line_title hidden-one\">\r\n                        {{item.Title?item.Title:item.TaskName}}\r\n                    </div>\r\n                    <div class=\"h_line_time\">\r\n                        {{$time(item.CreateTime).format(\"YYYY-MM-DD HH:mm\")}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ScrollView>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Notice\",\r\n    props: {},\r\n\r\n    components: {},\r\n\r\n    data() {\r\n        return {\r\n            dataList: [],\r\n            topicList: [{\r\n                TopicName: \"通知公告\",\r\n                Id: 1,\r\n                icon: \"icontongzhi\"\r\n            }, {\r\n                TopicName: \"审批中心\",\r\n                Id: 3,\r\n                icon: \"iconshenpi\"\r\n            }],\r\n            searchInfo: {\r\n                keyWord: null,\r\n                msgType: null\r\n            },\r\n            currentApi: \"BD_MessageIndex\",\r\n            currentIndex: 0,\r\n            currentType: 1,\r\n            switchList: [],\r\n            switchList1: [{\r\n                ClassName: \"未读\",\r\n                Id: 0\r\n            }, {\r\n                ClassName: \"已读\",\r\n                Id: 1\r\n            }, {\r\n                ClassName: \"全部\",\r\n                Id: null\r\n            }],\r\n            switchList3: [{\r\n                ClassName: \"待办\",\r\n                Id: 0\r\n            }, {\r\n                ClassName: \"已办\",\r\n                Id: 1\r\n            }, {\r\n                ClassName: \"全部\",\r\n                Id: 2\r\n            }],\r\n\r\n        };\r\n    },\r\n\r\n    methods: {\r\n        // 下拉刷新\r\n        down(instance) {\r\n            this.$refs[\"ScrollView\"].reUp()\r\n        },\r\n        // 上拉加载\r\n        up([page, instance]) {\r\n            this._api[this.currentApi]({\r\n                ...this.searchInfo,\r\n                Page: page.num,\r\n                PageSize: page.size\r\n            }).then(res => {\r\n                if (res) {\r\n                    let arr = res.data\r\n                    this.totalcount = res.totalcount\r\n                    if (page.num === 1) this.dataList = []\r\n                    this.dataList = this.dataList.concat(arr)\r\n                    this.$nextTick(() => { instance.endSuccess(arr.length) })\r\n                }\r\n            })\r\n        },\r\n\r\n        change(item) {\r\n            this.currentType = item.Id\r\n            this.currentIndex = 0\r\n            this.switchList = this[`switchList${item.Id}`]\r\n            this.searchInfo = this.$options.data().searchInfo\r\n\r\n            if (item.Id == 3) {\r\n                this.searchInfo.st = this.switchList[0].Id\r\n                this.currentApi = \"WF_WorkflowTaskProcessMY\"\r\n            }\r\n            if (item.Id == 1) {\r\n                this.searchInfo.isRead = this.switchList[0].Id\r\n                this.currentApi = \"BD_MessageIndex\"\r\n            }\r\n\r\n            this.dataList = []\r\n            this.$refs[\"ScrollView\"].reUp()\r\n        },\r\n        // \r\n        changeSwitch(item, index) {\r\n            this.currentIndex = index\r\n            this.dataList = []\r\n            if (this.currentType == 3) {\r\n                this.searchInfo.st = item.Id\r\n            }\r\n            if (this.currentType == 1) {\r\n                this.searchInfo.isRead = item.Id\r\n            }\r\n\r\n            this.$refs[\"ScrollView\"].reUp()\r\n        },\r\n        // 详情\r\n        toDetails(item) {\r\n            if (item.MsgType == 3) {\r\n                // 待办\r\n                this._api.BD_MessageDetails({\r\n                    Id: item.Id\r\n                }).then(res => {\r\n                    if (res) {\r\n                        item.isRead = 1\r\n                        if (res.data.Url.toUpperCase().includes(\"SHS\")) {\r\n                            let arr = res.data.Url.split('/')\r\n                            let Id = arr[arr.length - 1].match(/TaskId=(\\S*)/)[1]\r\n                            uni.navigateTo({\r\n                                url: \"/pages/Module/shs/details/ShsDetails?TaskId=\" + Id\r\n                            })\r\n                        }\r\n                        if (res.data.Url.toUpperCase().includes(\"PMP\") || res.data.Url.includes(\"PMS\")) {\r\n                            let arr = res.data.Url.split('/')\r\n                            let str = arr[arr.length - 1]\r\n\r\n                            let Id = str.includes(\"ProjectId\") ? str.match(/ProjectId=(\\S*)/)[1] : str.match(/Id=(\\S*)/)[1]\r\n                            uni.navigateTo({\r\n                                url: \"/pages/Module/pmp/details/PmpDetails?Id=\" + Id\r\n                            })\r\n                        }\r\n                    }\r\n                })\r\n            } else {\r\n                uni.navigateTo({\r\n                    url: \"/pages/Module/details/NoticeDetails?Id=\" + item.Id\r\n                })\r\n            }\r\n        },\r\n        // \r\n    },\r\n\r\n    async mounted() {\r\n        this.switchList = this.switchList1\r\n        await this.$nextTick()\r\n        // this.change(this.topicList[0])\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang='scss'>\r\n.content-main {\r\n    .notify_search {\r\n        position: relative;\r\n        display: flex;\r\n        align-items: center;\r\n        padding: 0 15px;\r\n        width: 100%;\r\n        height: 50px;\r\n\r\n        .org_search_input {\r\n            width: 100%;\r\n            height: 30px;\r\n            padding-left: 35px;\r\n            font-size: 14px;\r\n            background: #fff;\r\n            margin-right: 5px;\r\n            border-radius: 3px;\r\n            background: #f1f4f9;\r\n            border: none;\r\n            text-align: left!important;\r\n        }\r\n\r\n        .van-icon-search {\r\n            position: absolute;\r\n            left: 22px;\r\n            font-size: 14px;\r\n            color: #808080;\r\n        }\r\n    }\r\n\r\n    .notify_topic {\r\n        display: flex;\r\n        justify-content: space-around;\r\n        height: 70px;\r\n        border-bottom: 1px solid #f2f2f4;\r\n        padding: 0 20px;\r\n\r\n        .notify_topic_item {\r\n            display: flex;\r\n            flex-direction: column;\r\n            justify-content: space-evenly;\r\n            align-items: center;\r\n            width: 60px;\r\n            color: #878c90;\r\n            font-size: 14px;\r\n\r\n            i {\r\n                font-size: 40px;\r\n            }\r\n        }\r\n    }\r\n\r\n    .h_line_title {\r\n        font-size: 15px;\r\n        font-weight: 500;\r\n        padding-top: 10px;\r\n    }\r\n\r\n    .h_line_time {\r\n        color: #999;\r\n    }\r\n\r\n    .notify_list_item {\r\n        display: flex;\r\n        align-items: center;\r\n        height: 70px;\r\n        padding: 0 10px;\r\n        border-bottom: 1px solid #f2f2f4;\r\n\r\n        .notify_list_item_img {\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: left;\r\n            width: 30px;\r\n            height: 10px;\r\n\r\n            i {\r\n                font-size: 30px;\r\n                color: #70abf7;\r\n            }\r\n\r\n            .icon-myNotice {\r\n                font-size: 10px !important;\r\n                position: relative;\r\n                top: -15px;\r\n            }\r\n        }\r\n\r\n        .notify_list_item_content {\r\n            position: relative;\r\n            width: calc(100% - 30px);\r\n\r\n            .notify_ststus {\r\n                position: absolute;\r\n                right: 0;\r\n                bottom: 10px;\r\n                width: 50px;\r\n            }\r\n        }\r\n    }\r\n\r\n    .h-switch {\r\n        display: flex;\r\n        background: #4b9fff;\r\n        color: #fff;\r\n        padding: 2px;\r\n        border-radius: 3px;\r\n        margin-right: 15px;\r\n\r\n        .h-switch-item {\r\n            line-height: 24px;\r\n            padding: 0 10px;\r\n            border-radius: 3px;\r\n            font-size: 12px;\r\n            span-align: center;\r\n            transition: all 0.3s;\r\n\r\n            &.active {\r\n                background: #fff;\r\n                color: #4b9fff;\r\n            }\r\n\r\n            &:first-child {\r\n                margin-right: 3px;\r\n            }\r\n\r\n            &:last-child {\r\n                margin-left: 3px;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Notice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Notice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Notice.vue?vue&type=template&id=5b1b0af4&\"\nimport script from \"./Notice.vue?vue&type=script&lang=js&\"\nexport * from \"./Notice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Notice.vue?vue&type=style&index=0&id=5b1b0af4&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","_l","switchList","item","index","key","class","currentIndex","on","$event","changeSwitch","_s","ClassName","attrs","directives","name","rawName","value","searchInfo","keyWord","expression","domProps","target","composing","$set","topicList","style","currentType","Id","color","change","icon","staticStyle","TopicName","ref","down","up","dataList","toDetails","isRead","_e","Title","TaskName","$time","CreateTime","format","staticRenderFns","props","components","data","msgType","currentApi","switchList1","switchList3","methods","Page","PageSize","instance","uni","url","component"],"sourceRoot":""}