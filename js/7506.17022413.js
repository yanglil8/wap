"use strict";(self["webpackChunkwap"]=self["webpackChunkwap"]||[]).push([[7506],{7506:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-page"},[e("List",{ref:"list",attrs:{showBtn:"",apis:t.apis,render:t.render,fieldToPage:t.fieldToPage,FormCode:"oa_moveBill",aePageUrl:"/modular/oa/MoveBillAE"},on:{confirm:t.confirmx}})],1)},i=[],r={name:"MoveBillList",props:{},components:{List:()=>Promise.all([a.e(3903),a.e(8208)]).then(a.bind(a,7808))},data(){return{apis:{edit:this._api.OSMS_MoveBillEdit,create:this._api.OSMS_MoveBillCreate,list:this._api.OSMS_MoveBillManage,delete:this._api.OSMS_MoveBillDelete,audit:this._api.OSMS_MoveBillAudit,details:this._api.OSMS_MoveBillDetails},fieldToPage:{OutWarehouseName:this.toDetails},FormsCode:"oa_moveBill",fieldList:{"物料名称":"FName","物料规格":"Model"},aeForm:{}}},methods:{render(t){return t("div",[t("el-table-column",{attrs:{prop:"OutWarehouseName",label:"调出仓库",width:"",align:"left","header-align":"center"}}),t("el-table-column",{attrs:{prop:"InWarehouseName",label:"调入仓库",width:"",align:"center"}}),t("el-table-column",{attrs:{prop:"OutStatus",label:"调出状态",width:"100",align:"center",formatter:e=>t("span",[3==e.OutStatus?"审核":"未审核"])}}),t("el-table-column",{attrs:{prop:"InStatus",label:"调入状态",width:"100",align:"center",formatter:e=>t("span",[3==e.InStatus?"审核":"未审核"])}}),t("el-table-column",{attrs:{prop:"FDate",label:"调拨日期",width:"100",align:"center",formatter:e=>t("span",[this.$time(e.FDate).format("YYYY-MM-DD")])}}),t("el-table-column",{attrs:{prop:"CreateName",label:"创建人",width:"100",align:"center"}}),t("el-table-column",{attrs:{prop:"CreateTime",label:"创建时间",width:"160",align:"center",formatter:e=>t("span",[e.CreateTime])}})])},toDetails(t){this.$refs.FormDetails.start(t)},auditAny(){let t=this.$refs.list.chooseList;0!==t.length&&this.$u.confirm("请确认批量审核!").then((()=>{this._api.OSMS_MoveBillInAudit(t.map((t=>({Id:t.Id,FStatus:3})))).then((t=>{t&&(this.$u.msg("审核成功!"),this.$refs.list.getList())}))})).catch((()=>{}))},customRender(t,e){return t("div",{style:"width:100%"},[e.isDetails?t("span"):t("el-button",{attrs:{type:"primary",plain:!0},style:"margin:0 0 10px calc(100% - 80px)",on:{click:t=>this.appendShunt(e)}},["新 增"]),t("el-table",{attrs:{data:e.EntryList,"highlight-current-row":!0,stripe:!0,border:!0,"empty-text":"",height:"400px"}},[t("el-table-column",{attrs:{fixed:!0,type:"index",label:"序号",width:"50",align:"center"}}),t("el-table-column",{attrs:{label:"物料",prop:"Fname",align:"center",formatter:e=>t("span",[e.MaterialName])}}),"/*  ",t("el-table-column",{attrs:{label:"批次",prop:"LotNumber",align:"center",formatter:a=>e.isDetails?t("span",[a.LotNumber]):t("el-input",{attrs:{type:"number"},model:{value:a.LotNumber,callback:t=>{this.$set(a,"LotNumber",t)}}})}}),"*/",t("el-table-column",{attrs:{label:"数量",prop:"Qty",align:"center",formatter:a=>e.isDetails?t("span",[a.Qty]):t("el-input",{attrs:{type:"number"},model:{value:a.Qty,callback:t=>{this.$set(a,"Qty",t)}}})}}),e.isDetails?"":t("el-table-column",{attrs:{label:"操作",width:"120",align:"center",fixed:"right",formatter:(a,l,i,r)=>t("i",{class:"iconfont icon-remove",attrs:{title:"删除"},on:{click:t=>this.remove(e,a,r)}})}})])])},appendShunt(t){this.aeForm=t,this.$refs.choose.start()},choose(t){this.aeForm.EntryList=this.aeForm.EntryList.concat(t.map((t=>({MaterialId:t.Id,MaterialName:t.FName,LotNumber:null,Qty:null}))))},remove(t,e,a){this.$u.confirm("请确认删除？").then((()=>{t.EntryList.splice(a,1)})).catch((()=>{}))},confirmx(t){this.apis.audit([{Id:t.Id,FStatus:3}]).then((e=>{e&&(t.FStatus=3,this.$u.msg("确认成功！"))}))}},mounted(){}},s=r,n=a(3736),o=(0,n.Z)(s,l,i,!1,null,"ab780958",null),m=o.exports}}]);
//# sourceMappingURL=7506.17022413.js.map